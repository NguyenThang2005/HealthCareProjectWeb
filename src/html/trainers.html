<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Huấn luyện viên | HealthFit</title>
  <link rel="stylesheet" href="/assets/css/styles.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="icon" href="/images/tab.png" type="image/png">
  <style>
    .booking-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }
    .booking-content {
      background: white;
      padding: 2rem;
      border-radius: 0.5rem;
      width: 90%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
    }
    .close-btn {
      position: absolute;
      top: 1rem;
      right: 1rem;
      font-size: 1.5rem;
      cursor: pointer;
      color: #666;
    }
    .close-btn:hover {
      color: #000;
    }
    .time-slot-booked {
      color: #999;
      text-decoration: line-through;
    }
    .reasons {
      padding: 4rem 2rem;
      background-color: #f8fafc;
    }
    .title {
      text-align: center;
      font-size: 2rem;
      font-weight: bold;
      margin-bottom: 3rem;
      color: #2d3748;
    }
    .reasons-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      max-width: 1200px;
      margin: 0 auto;
    }
    .reason-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      background: white;
      padding: 1.5rem;
      border-radius: 0.5rem;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    .reason-item p {
      font-size: 1.1rem;
      color: #4a5568;
    }
    .highlight {
      color: #38a169;
      font-weight: 600;
    }
    #timeSlotWarning {
      color: #e53e3e;
      font-size: 0.875rem;
      margin-top: 0.5rem;
      display: none;
    }
  </style>
</head>
<body class="bg-gray-50">
 <header class="bg-white shadow-md">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <img src="/images/logo.jpg" alt="HealthFit Logo - Chữ S khỏe mạnh màu xanh lá trên nền trắng" class="h-12">
                <h1 class="text-2xl font-bold text-green-600">HealthFit</h1>
            </div>
            <nav class="hidden md:flex space-x-8">
              <a href="index.html" class="text-gray-800 hover:text-green-600 font-medium">Trang chủ</a>
                <a href="measurement.html" class="text-gray-800 hover:text-green-600 font-medium">Đo chỉ số</a>
                <a href="equipment.html" class="text-gray-800 hover:text-green-600 font-medium">Hướng dẫn thiết bị</a>
                <a href="news.html" class="text-gray-800 hover:text-green-600 font-medium">Tin tức</a>
                <a href="trainers.html" class="text-gray-800 hover:text-green-600 font-medium active">Huấn luyện viên</a>
                <a href="products.html" class="text-gray-800 hover:text-green-600 font-medium">Sản phẩm</a>
                <a href="feedback.html" class="text-gray-800 hover:text-green-600 font-medium">Góp ý</a>
            </nav>
               <div class="flex items-center space-x-4">
                                            <!-- Nút Đăng nhập (ẩn khi đã login) -->
                        <button id="loginBtn" class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition">Đăng nhập</button>

                        <!-- Icon người dùng (ẩn mặc định) -->
                        <a id="userIcon" href="/user/user.html" class="hidden">
                        <img src="https://megaweb.vn/blog/uploads/images/meme-meo-cute-1.jpg" alt="Avatar" class="w-10 h-10 rounded-full cursor-pointer border-2 border-green-600">
                        </a>

                    <button id="menuBtn" class="md:hidden text-gray-800 text-2xl">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>

        </div>
        <!-- Mobile Menu -->
        <div id="mobileMenu" class="hidden md:hidden bg-white border-t">
            <div class="container mx-auto px-4 py-2 flex flex-col space-y-2">
                <a href="index.html" class="text-gray-800 hover:text-green-600 py-2">Trang chủ</a>
                <a href="measurement.html" class="text-gray-800 hover:text-green-600 py-2">Đo chỉ số</a>
                <a href="equipment.html" class="text-gray-800 hover:text-green-600 py-2">Hướng dẫn thiết bị</a>
                <a href="news.html" class="text-gray-800 hover:text-green-600 py-2">Tin tức</a>
                <a href="trainers.html" class="text-gray-800 hover:text-green-600 py-2 active">Huấn luyện viên</a>
                <a href="products.html" class="text-gray-800 hover:text-green-600 py-2">Sản phẩm</a>
                <a href="feedback.html" class="text-gray-800 hover:text-green-600 font-medium">Góp ý</a>
            </div>
        </div>

        
    </header>

<section class="reasons">
  <h2 class="title">LÝ DO CẦN CÓ HUẤN LUYỆN VIÊN CÁ NHÂN</h2>
  <div class="reasons-grid">
    <div class="reason-item">
      <svg width="50" height="50" viewBox="0 0 24 24" fill="none" stroke="#34a83c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <rect x="3" y="4" width="18" height="16" rx="2" ry="2"></rect>
        <line x1="16" y1="2" x2="16" y2="6"></line>
        <line x1="8" y1="2" x2="8" y2="6"></line>
        <line x1="3" y1="10" x2="21" y2="10"></line>
      </svg>
      <p>Giúp bạn <span class="highlight">đặt mục tiêu</span> tập luyện</p>
    </div>
    <div class="reason-item">
      <svg width="50" height="50" viewBox="0 0 24 24" fill="none" stroke="#34a83c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="12" y1="6" x2="12" y2="12"></line>
        <line x1="12" y1="12" x2="16" y2="14"></line>
      </svg>
      <p>Tư vấn lộ trình <span class="highlight">giảm/ tăng cân</span></p>
    </div>
    <div class="reason-item">
      <svg width="50" height="50" viewBox="0 0 24 24" fill="none" stroke="#34a83c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10"></circle>
        <polyline points="12 6 12 12 16 14"></polyline>
      </svg>
      <p>Điều chỉnh <span class="highlight">kỹ thuật</span> khi tập luyện</p>
    </div>
    <div class="reason-item">
      <svg width="50" height="50" viewBox="0 0 24 24" fill="none" stroke="#34a83c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M3 17h18M6 10h12l-6-7-6 7z"></path>
      </svg>
      <p>Hướng dẫn <span class="highlight">dinh dưỡng</span> tập luyện</p>
    </div>
    <div class="reason-item">
      <svg width="50" height="50" viewBox="0 0 24 24" fill="none" stroke="#34a83c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="8" r="4"></circle>
        <path d="M6 20v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2"></path>
      </svg>
      <p>Động viên khích lệ <span class="highlight">tinh thần</span></p>
    </div>
    <div class="reason-item">
      <svg width="50" height="50" viewBox="0 0 24 24" fill="none" stroke="#34a83c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10"></circle>
        <polyline points="12 6 12 12 16 14"></polyline>
      </svg>
      <p><span class="highlight">Thời gian linh hoạt</span> theo lựa chọn</p>
    </div>
  </div>
</section>


  <section class="py-16">
    <div class="container mx-auto px-4">
      <h1 class="text-3xl font-bold text-center mb-8">Đội ngũ huấn luyện viên</h1>
      <div class="grid md:grid-cols-3 gap-8">
        <!-- Trainer 1 -->
        <div class="bg-white p-6 rounded-lg shadow-md text-center">
          <img src="/images/thehinh.png" style="height: 50%;" class="mx-auto mb-4 rounded-full" alt="HLV A">
          <h3 class="text-xl font-bold mb-2">Nguyễn Văn An</h3>
          <p class="text-gray-600 mb-2">Chuyên gia thể hình</p>
          <p class="text-gray-500 text-sm mb-4">10 năm kinh nghiệm, chứng chỉ quốc tế NASM.</p>
          <button onclick="openBookingModal('Nguyễn Văn An', 'Chuyên gia thể hình')" class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition">Đặt lịch ngay</button>
        </div>


        <!-- Trainer 2 -->
        <div class="bg-white p-6 rounded-lg shadow-md text-center">
          <img src="/images/dinhduong.png" style="height: 50%;" class="mx-auto mb-4 rounded-full" alt="HLV B">
          <h3 class="text-xl font-bold mb-2">Lê Quốc Bình</h3>
          <p class="text-gray-600 mb-2">Chuyên gia dinh dưỡng</p>
          <p class="text-gray-500 text-sm mb-4">Tốt nghiệp ĐH Y Dược TP.HCM, chuyên tư vấn giảm cân khoa học.</p>
          <button onclick="openBookingModal('Lê Quốc Bình', 'Chuyên gia dinh dưỡng')" class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition">Đặt lịch ngay</button>
        </div>
        <!-- Trainer 3 -->
        <div class="bg-white p-6 rounded-lg shadow-md text-center">
          <img src="/images/PT.png" style="height: 50%;" class="mx-auto mb-4 rounded-full" alt="HLV C">
          <h3 class="text-xl font-bold mb-2">Trần Thị Chi</h3>
          <p class="text-gray-600 mb-2">PT cá nhân</p>
          <p class="text-gray-500 text-sm mb-4">Đào tạo hàng trăm học viên từ cơ bản đến nâng cao.</p>
          <button onclick="openBookingModal('Trần Thị Chi', 'PT cá nhân')" class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition">Đặt lịch ngay</button>

          </div>
      </div>
    </div>
  </section>

  <!-- Booking History Section -->
  <section class="py-16 bg-gray-50" id="bookingHistory">
    <div class="container mx-auto px-4">
      <div class="flex justify-between items-center mb-8">
        <h2 class="text-2xl font-bold">Lịch sử đặt lịch</h2>
        <button onclick="clearBookingHistory()" class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition text-sm">Xóa tất cả</button>
      </div>
      
      <div class="bg-white shadow-md rounded-lg overflow-hidden">
        <div class="overflow-x-auto">
          <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
              <tr>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Huấn luyện viên</th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ngày</th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Thời gian</th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Trạng thái</th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Thao tác</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200" id="historyList">
              <!-- Danh sách lịch đặt sẽ được thêm vào đây bằng JavaScript -->
            </tbody>
          </table>
        </div>
        
        <div class="bg-gray-50 px-6 py-4 text-center text-sm text-gray-500" id="emptyHistoryMessage">
          Bạn chưa có lịch đặt nào. Hãy đặt lịch với huấn luyện viên của chúng tôi!
        </div>
      </div>
    </div>
  </section>

  <!-- Booking Modal -->
  <div id="bookingModal" class="booking-modal">
    <div class="booking-content relative">
      <span class="close-btn" onclick="closeBookingModal()">&times;</span>
      <h2 class="text-2xl font-bold mb-4" id="modalTrainerName"></h2>
      <p class="text-gray-600 mb-2" id="modalTrainerSpecialty"></p>
      
      <form class="mt-6 space-y-4">
        <div>
          <label for="bookingName" class="block text-gray-700 mb-1">Họ và tên</label>
          <input type="text" id="bookingName" class="w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-500" required>
        </div>
        
        <div>
          <label for="bookingPhone" class="block text-gray-700 mb-1">Số điện thoại</label>
          <input type="tel" id="bookingPhone" class="w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-500" required>
        </div>
        
        <div>
          <label for="bookingEmail" class="block text-gray-700 mb-1">Email</label>
          <input type="email" id="bookingEmail" class="w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-500" required>
        </div>
        
        <div>
          <label for="bookingDate" class="block text-gray-700 mb-1">Ngày hẹn</label>
          <input type="date" id="bookingDate" class="w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-500" required>
        </div>
        
        <div>
          <label for="bookingTime" class="block text-gray-700 mb-1">Thời gian</label>
          <select id="bookingTime" class="w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-500" required>
            <option value="">Chọn thời gian</option>
            <option value="07:00">7:00 - 8:00</option>
            <option value="08:00">8:00 - 9:00</option>
            <option value="09:00">9:00 - 10:00</option>
            <option value="10:00">10:00 - 11:00</option>
            <option value="14:00">14:00 - 15:00</option>
            <option value="15:00">15:00 - 16:00</option>
            <option value="16:00">16:00 - 17:00</option>
            <option value="17:00">17:00 - 18:00</option>
          </select>
          <p id="timeSlotWarning" class="hidden">Khung giờ này đã được đặt. Vui lòng chọn khung giờ khác.</p>
        </div>
        
        <div>
          <label for="bookingNote" class="block text-gray-700 mb-1">Ghi chú</label>
          <textarea id="bookingNote" rows="3" class="w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-500"></textarea>
        </div>
        
        <button type="button" onclick="submitBooking()" class="w-full py-2 bg-green-600 text-white rounded hover:bg-green-700 transition">Xác nhận đặt lịch</button>
      </form>
    </div>
  </div>

  <footer class="bg-gray-800 text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid md:grid-cols-4 gap-8">
                <!-- About -->
                <div>
                    <h3 class="text-xl font-bold mb-4">HealthFit</h3>
                    <p class="text-gray-300">Nền tảng chăm sóc sức khỏe và thể hình toàn diện, giúp bạn đạt được mục tiêu tập luyện một cách khoa học.</p>
                </div>
                <!-- Quick Links -->
                <div>
                    <h3 class="text-xl font-bold mb-4">Liên kết nhanh</h3>
                    <ul class="space-y-2">
                        <li><a href="index.html" class="text-gray-300 hover:text-white">Trang chủ</a></li>
                        <li><a href="measurement.html" class="text-gray-300 hover:text-white">Đo chỉ số</a></li>
                        <li><a href="equipment.html" class="text-gray-300 hover:text-white">Hướng dẫn thiết bị</a></li>
                        <li><a href="trainers.html" class="text-gray-300 hover:text-white">Huấn luyện viên</a></li>
                    </ul>
                </div>
                <!-- Contact -->
                <div>
                    <h3 class="text-xl font-bold mb-4">Liên hệ</h3>
                    <ul class="space-y-2">
                        <li class="flex items-center">
                            <i class="fas fa-map-marker-alt text-green-500 mr-2"></i>
                            <span class="text-gray-300">Số 2 Võ Oanh P.25 Quận Bình Thạnh TP.HCM</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-phone text-green-500 mr-2"></i>
                            <span class="text-gray-300">(028) 3823 4567</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-envelope text-green-500 mr-2"></i>
                            <span class="text-gray-300">support@healthfit.vn</span>
                        </li>
                    </ul>
                </div>
                <!-- Newsletter -->
                <div>
                    <h3 class="text-xl font-bold mb-4">Đăng ký nhận tin</h3>
                    <p class="text-gray-300 mb-3">Nhận thông tin mới nhất về sức khỏe và ưu đãi.</p>
                    <form class="flex">
                        <input type="email" placeholder="Email của bạn" class="px-4 py-2 rounded-l focus:outline-none w-full text-gray-800">
                        <button type="submit" class="px-4 py-2 bg-green-600 text-white rounded-r hover:bg-green-700">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </form>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
                <p>© 2025 HealthFit. <a href="https://nguyenthang2005.github.io/Nhom7_CV/">Tất cả các quyền được bảo lưu.</a></p>
            </div>
        </div>
    </footer>
    <!-- Login Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg p-8 max-w-md w-full">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Đăng nhập</h2>
                <button id="closeModal" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
                <form id="loginForm" action="/php/auth.php" method="POST">

                <div class="mb-4">
                    <label for="email" class="block text-gray-700 mb-2">Email</label>
                    <input type="email" id="email" name="email" class="w-full px-4 py-2 border rounded focus:outline-none focus:border-green-500" required>
                </div>
                <div class="mb-6">
                    <label for="password" class="block text-gray-700 mb-2">Mật khẩu</label>
                    <input type="password" id="password" name="password" class="w-full px-4 py-2 border rounded focus:outline-none focus:border-green-500" required>
                </div>
                <button type="submit" class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700 mb-4">Đăng nhập</button>
                <div class="text-center">
                    <a href="#" class="text-green-600 hover:underline">Quên mật khẩu?</a>
                </div>
            </form>
            <div class="mt Community-created resourcesV6 mt-4 pt-4 border-t border-gray-200 text-center">
            <p class="text-gray-600">Chưa có tài khoản? <a href="register.html" class="text-green-600 hover:underline">Đăng ký ngay</a></p>
            </div>
        </div>
    </div>

  <script>
    // Mobile menu toggle
    const menuBtn = document.getElementById('menuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    
    menuBtn.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
    });

    // Booking modal functions
    function openBookingModal(name, specialty) {
      document.getElementById('modalTrainerName').textContent = name;
      document.getElementById('modalTrainerSpecialty').textContent = specialty;
      document.getElementById('bookingModal').style.display = 'flex';
      
      // Set min date to tomorrow
      const today = new Date();
      const tomorrow = new Date(today);
      tomorrow.setDate(tomorrow.getDate() + 1);
      
      const dd = String(tomorrow.getDate()).padStart(2, '0');
      const mm = String(tomorrow.getMonth() + 1).padStart(2, '0');
      const yyyy = tomorrow.getFullYear();
      
      document.getElementById('bookingDate').min = `${yyyy}-${mm}-${dd}`;
      
      // Reset form
      document.getElementById('bookingName').value = '';
      document.getElementById('bookingPhone').value = '';
      document.getElementById('bookingEmail').value = '';
      document.getElementById('bookingDate').value = '';
      document.getElementById('bookingTime').value = '';
      document.getElementById('bookingNote').value = '';
      
      // Disable các khung giờ đã đặt nếu có
      disableBookedTimeSlots();
    }

    function closeBookingModal() {
      document.getElementById('bookingModal').style.display = 'none';
    }

    function validatePhoneNumber(phone) {
      // Kiểm tra số điện thoại có 9-10 số và chỉ chứa số
      const phoneRegex = /^[0-9]{9,10}$/;
      return phoneRegex.test(phone);
    }

    function validateEmail(email) {
      // Kiểm tra email có đúng định dạng
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return emailRegex.test(email);
    }

    function isTimeSlotBooked(date, time) {
      const history = JSON.parse(localStorage.getItem('bookingHistory')) || [];
      
      if (!date || !time) return false;
      
      // Chuyển đổi thời gian đặt mới thành timestamp để so sánh
      const newDate = new Date(date);
      const newTimeParts = time.split(':');
      newDate.setHours(parseInt(newTimeParts[0]));
      newDate.setMinutes(0);
      
      // Kiểm tra từng lịch đã đặt
      for (const booking of history) {
        if (!booking.date || !booking.time) continue;
        
        const bookedDate = new Date(booking.date);
        const bookedTimeParts = booking.time.split(':');
        bookedDate.setHours(parseInt(bookedTimeParts[0]));
        bookedDate.setMinutes(0);
        
        // Nếu cùng ngày và cùng khung giờ
        if (newDate.getTime() === bookedDate.getTime()) {
          return true;
        }
      }
      
      return false;
    }

    function disableBookedTimeSlots() {
      const history = JSON.parse(localStorage.getItem('bookingHistory')) || [];
      const timeSelect = document.getElementById('bookingTime');
      const dateInput = document.getElementById('bookingDate');
      const warningElement = document.getElementById('timeSlotWarning');
      
      // Reset tất cả options
      Array.from(timeSelect.options).forEach(option => {
        if (option.value) {
          option.disabled = false;
          option.classList.remove('time-slot-booked');
        }
      });
      
      // Ẩn cảnh báo
      warningElement.classList.add('hidden');
      
      // Nếu chưa chọn ngày thì không làm gì
      if (!dateInput.value) return;
      
      // Lọc các lịch đã đặt trong ngày được chọn
      const selectedDate = new Date(dateInput.value).toISOString().split('T')[0];
      const bookedTimes = history.filter(booking => {
        if (!booking.date) return false;
        const bookingDate = new Date(booking.date).toISOString().split('T')[0];
        return bookingDate === selectedDate;
      }).map(booking => booking.time.split(':')[0]);
      
      // Disable các khung giờ đã đặt
      Array.from(timeSelect.options).forEach(option => {
        if (option.value && bookedTimes.includes(option.value.split(':')[0])) {
          option.disabled = true;
          option.classList.add('time-slot-booked');
          if (option.selected) {
            option.selected = false;
            warningElement.classList.remove('hidden');
          }
        }
      });
    }

    function saveBookingToHistory(booking) {
      let history = JSON.parse(localStorage.getItem('bookingHistory')) || [];
      history.push(booking);
      localStorage.setItem('bookingHistory', JSON.stringify(history));
      updateHistoryView();
    }

    function updateHistoryView() {
      const history = JSON.parse(localStorage.getItem('bookingHistory')) || [];
      const historyList = document.getElementById('historyList');
      const emptyMessage = document.getElementById('emptyHistoryMessage');
      const historySection = document.getElementById('bookingHistory');
      
      if (history.length === 0) {
        emptyMessage.classList.remove('hidden');
        historyList.innerHTML = '';
        return;
      }
      
      // Ẩn thông báo trống nếu có lịch sử
      emptyMessage.classList.add('hidden');
      
      // Xóa nội dung cũ
      historyList.innerHTML = '';
      
      // Thêm từng booking vào bảng
      history.forEach((booking, index) => {
        if (!booking.date || !booking.time) return;
        
        const formattedDate = new Date(booking.date).toLocaleDateString('vi-VN');
        const row = document.createElement('tr');
        row.innerHTML = `
          <td class="px-6 py-4 whitespace-nowrap">${booking.trainerName || 'Không có thông tin'}</td>
          <td class="px-6 py-4 whitespace-nowrap">${formattedDate}</td>
          <td class="px-6 py-4 whitespace-nowrap">${booking.time || 'Không có thông tin'}</td>
          <td class="px-6 py-4 whitespace-nowrap">
            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
              ${booking.status === 'confirmed' ? 'Đã xác nhận' : 'Chờ xác nhận'}
            </span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <button onclick="cancelBooking('${booking.id}')" class="text-red-500 hover:text-red-700">
              Hủy lịch
            </button>
          </td>
        `;
        historyList.appendChild(row);
      });
      
      // Hiển thị section lịch sử
      historySection.classList.remove('hidden');
    }

    function cancelBooking(bookingId) {
      if (confirm('Bạn có chắc chắn muốn hủy lịch đặt này?')) {
        let history = JSON.parse(localStorage.getItem('bookingHistory')) || [];
        history = history.filter(booking => booking.id !== bookingId);
        localStorage.setItem('bookingHistory', JSON.stringify(history));
        updateHistoryView();
        
        // Cập nhật lại các khung giờ có sẵn trong modal nếu đang mở
        if (document.getElementById('bookingModal').style.display === 'flex') {
          disableBookedTimeSlots();
        }
      }
    }

    function clearBookingHistory() {
      if (confirm('Bạn có chắc chắn muốn xóa toàn bộ lịch sử đặt lịch?')) {
        localStorage.removeItem('bookingHistory');
        updateHistoryView();
        
        // Cập nhật lại các khung giờ có sẵn trong modal nếu đang mở
        if (document.getElementById('bookingModal').style.display === 'flex') {
          disableBookedTimeSlots();
        }
      }
    }

    function submitBooking() {
      const name = document.getElementById('bookingName').value;
      const phone = document.getElementById('bookingPhone').value;
      const email = document.getElementById('bookingEmail').value;
      const date = document.getElementById('bookingDate').value;
      const time = document.getElementById('bookingTime').value;
      const note = document.getElementById('bookingNote').value;
      const trainerName = document.getElementById('modalTrainerName').textContent;
      const trainerSpecialty = document.getElementById('modalTrainerSpecialty').textContent;
      
      if (!name || !phone || !email || !date || !time) {
        alert('Vui lòng điền đầy đủ thông tin bắt buộc');
        return;
      }
      
      if (!validatePhoneNumber(phone)) {
        alert('Số điện thoại phải có 9-10 chữ số');
        return;
      }
      
      if (!validateEmail(email)) {
        alert('Vui lòng nhập đúng định dạng email (ví dụ: example@domain.com)');
        return;
      }
      
      // Kiểm tra trùng lịch
      if (isTimeSlotBooked(date, time)) {
        alert('Bạn đã có lịch đặt vào khung giờ này. Vui lòng chọn thời gian khác.');
        return;
      }
      
      // Tạo object booking
      const booking = {
        id: Date.now().toString(),
        name,
        phone,
        email,
        date,
        time,
        note,
        trainerName,
        trainerSpecialty,
        status: 'confirmed',
        bookingDate: new Date().toISOString()
      };
      
      // Lưu vào lịch sử
      saveBookingToHistory(booking);
      
      alert(`Đã đặt lịch thành công với HLV ${trainerName}!\n\n` +
            `Ngày: ${new Date(date).toLocaleDateString('vi-VN')}\n` +
            `Thời gian: ${time}\n` +
            `Chúng tôi sẽ liên hệ với bạn qua số điện thoại ${phone} để xác nhận.`);
      
      closeBookingModal();
    }

    // Close modal when clicking outside
    window.onclick = function(event) {
      const modal = document.getElementById('bookingModal');
      if (event.target === modal) {
        closeBookingModal();
      }
    }

    // Login modal handling
    const loginBtn = document.getElementById('loginBtn');
    const loginModal = document.getElementById('loginModal');
    const closeModalBtn = document.getElementById('closeModal');
    
    loginBtn.addEventListener('click', () => {
      loginModal.classList.remove('hidden');
    });
    
    closeModalBtn.addEventListener('click', () => {
      loginModal.classList.add('hidden');
    });
    
    // Close login modal when clicking outside
    window.addEventListener('click', (event) => {
      if (event.target === loginModal) {
        loginModal.classList.add('hidden');
      }
    });

    // Load lịch sử khi trang được tải
    document.addEventListener('DOMContentLoaded', function() {
      updateHistoryView();
      
      // Thêm event listener cho input ngày
      document.getElementById('bookingDate').addEventListener('change', disableBookedTimeSlots);
      
      // Thêm event listener cho select thời gian
      document.getElementById('bookingTime').addEventListener('change', function() {
        const date = document.getElementById('bookingDate').value;
        const time = this.value;
        const warningElement = document.getElementById('timeSlotWarning');
        
        if (date && time && isTimeSlotBooked(date, time)) {
          warningElement.classList.remove('hidden');
        } else {
          warningElement.classList.add('hidden');
        }
      });
    });
  </script>
  <script src="/assets/js/session_check.js"></script>
  <script src="/src/assets/js/app.js"></script>
</body>
</html>